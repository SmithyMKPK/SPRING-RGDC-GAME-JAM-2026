[gd_scene format=3 uid="uid://ctfegbv4gvfln"]

[ext_resource type="Script" uid="uid://dqhvr513nhgyt" path="res://player/player_movement.gd" id="1_rte7y"]
[ext_resource type="SpriteFrames" uid="uid://7kvgin5h72xe" path="res://assets/character_sprite_sheets/sherlock_frames.tres" id="2_rte7y"]
[ext_resource type="Material" uid="uid://dfn5rpdbdrajg" path="res://levels/light/hide_out_of_range.tres" id="2_ywcaw"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5vbj4"]
size = Vector2(12, 12)

[sub_resource type="Animation" id="Animation_fyfjg"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlayerSprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"default"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PlayerSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PlayerSprite:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("PlayerSprite:modulate:a")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1.0]
}

[sub_resource type="Animation" id="Animation_y5d0e"]
resource_name = "death"
length = 0.7
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlayerSprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"death"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PlayerSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PlayerSprite:modulate:a")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.36666667, 0.7),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [1.0, 1.0, 0.0]
}

[sub_resource type="Animation" id="Animation_ywcaw"]
resource_name = "idle"
length = 1.6666701
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlayerSprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"default"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PlayerSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PlayerSprite:position")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.8333333),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -0.5)]
}

[sub_resource type="Animation" id="Animation_3gx1v"]
resource_name = "walk"
length = 0.5333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlayerSprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"walk"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PlayerSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.16666667, 0.26666668, 0.43333334),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_3gx1v"]
_data = {
&"RESET": SubResource("Animation_fyfjg"),
&"death": SubResource("Animation_y5d0e"),
&"idle": SubResource("Animation_ywcaw"),
&"walk": SubResource("Animation_3gx1v")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3gx1v"]
animation = &"death"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fyfjg"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ywcaw"]
animation = &"walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3gx1v"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_y5d0e"]
advance_mode = 2
advance_condition = &"walking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_knoog"]
advance_mode = 2
advance_expression = "!get(\"parameters/conditions/walking\")"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gtnks"]
advance_mode = 2
advance_condition = &"dead"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_khcyd"]
advance_mode = 2
advance_condition = &"dead"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_fyfjg"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_gtnks"]
states/End/position = Vector2(729, 67)
states/Start/position = Vector2(255, 76)
states/death/node = SubResource("AnimationNodeAnimation_3gx1v")
states/death/position = Vector2(551, 76)
states/idle/node = SubResource("AnimationNodeAnimation_fyfjg")
states/idle/position = Vector2(393, 76)
states/walk/node = SubResource("AnimationNodeAnimation_ywcaw")
states/walk/position = Vector2(393, 169)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_3gx1v"), "idle", "walk", SubResource("AnimationNodeStateMachineTransition_y5d0e"), "walk", "idle", SubResource("AnimationNodeStateMachineTransition_knoog"), "idle", "death", SubResource("AnimationNodeStateMachineTransition_gtnks"), "walk", "death", SubResource("AnimationNodeStateMachineTransition_khcyd"), "death", "End", SubResource("AnimationNodeStateMachineTransition_fyfjg")]
graph_offset = Vector2(264.2075, 0)

[node name="CharacterBody2D" type="CharacterBody2D" unique_id=1317433075 node_paths=PackedStringArray("animation_tree", "sprite")]
collision_mask = 17
script = ExtResource("1_rte7y")
speed = 80.0
animation_tree = NodePath("AnimationTree")
wall_walk_tolerance = 0.1
sprite = NodePath("PlayerSprite")

[node name="PlayerSprite" type="AnimatedSprite2D" parent="." unique_id=72132033]
material = ExtResource("2_ywcaw")
sprite_frames = ExtResource("2_rte7y")
offset = Vector2(-3, -7)

[node name="Player Hurtbox" type="CollisionShape2D" parent="." unique_id=788408295]
shape = SubResource("RectangleShape2D_5vbj4")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." unique_id=646113341]
libraries/ = SubResource("AnimationLibrary_3gx1v")

[node name="AnimationTree" type="AnimationTree" parent="." unique_id=1570903182]
tree_root = SubResource("AnimationNodeStateMachine_gtnks")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/dead = false
parameters/conditions/walking = false
